server {
    listen 80;


    #sub_filter 'http://minio:9000' '';

    location /api/ {
      proxy_set_header Host $http_host;
      proxy_pass http://backend:8000/api/;
    }

    location /admin/ {
      proxy_set_header Host $http_host;
      proxy_pass http://backend:8000/admin/;
    }

    location /running-app/ {
        proxy_set_header Host $http_host;
        alias /media/;
      }
    # location /running-app/media/ {
    #     #proxy_set_header Host $http_host;
    #     #proxy_set_header X-Real-IP $remote_addr;
    #     #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     #proxy_set_header X-Forwarded-Proto $scheme;
    #     proxy_pass http://minio:9000/running-app/media/;
    #   }

    # location /running-app/static/ {
    #     #proxy_set_header Host $http_host;
    #     #proxy_set_header X-Real-IP $remote_addr;
    #     #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     #proxy_set_header X-Forwarded-Proto $scheme;
    #     proxy_set_header X-Real-IP $remote_addr;
    #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     proxy_set_header X-Forwarded-Proto $scheme;
    #     proxy_http_version 1.1;
    #     proxy_set_header Connection "";
    #     chunked_transfer_encoding off;
    #     proxy_pass http://minio:9000/running-app/static/;
    #   }

    # location /minio/ {
    #     proxy_set_header Host $http_host;
    #     proxy_pass http://minio:9000/;
    #   }

    # location /minioserver/ {
    #     proxy_set_header Host $http_host;
    #     proxy_pass http://minio:9001/;
    #   }


    # location / {
    #     #proxy_set_header Host minio:9000;
    #     # proxy_set_header X-Real-IP $remote_addr;
    #     # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     # proxy_set_header X-Forwarded-Proto $scheme;
    #     # proxy_http_version 1.1;
    #     #root /running-app/static/;
    #     # proxy_set_header Connection "";
    #     # chunked_transfer_encoding off;
    #     #proxy_pass http://minio:9000;
    #     #try_files $uri &uri/ /index.html;
    #   }

    location / {
        #uwsgi_pass uwsgi;
        # alias /static/;
        # proxy_set_header Host $http_host;
        # proxy_set_header X-Real-IP $remote_addr;
        # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        # proxy_set_header X-Forwarded-Proto $scheme;
        # proxy_pass http://minio:9000;
        try_files $uri &uri/ /index.html;
      }

}
